<?xml version="1.0" encoding="UTF-8" ?>
<project name="InfoService">

	<taskdef name="http" classname="org.missinglink.ant.task.http.HttpClientTask">
	</taskdef>

	<target name="getCurrentVersionInformation">
		<loadfile srcfile="${src_dir}/infoservice/InfoService.java"
			property="currentVersion">
			<filterchain>
				<linecontains>
					<contains
						value="public static final String INFOSERVICE_VERSION" />
				</linecontains>
				<tokenfilter>
					<stringtokenizer delims='"'
						suppressdelims="true" />
					<containsstring contains="." />
				</tokenfilter>
			</filterchain>
		</loadfile>
		<echo message="Current Version: ${currentVersion}" />
	</target>

	<target name="deploy_daily_snapshot" depends="getCurrentVersionInformation">
		<echo message="${currentVersion}" file="${WWWDEVELOP}/infoserviceversion.txt" />
		<copy file="${signedJarFile}" tofile="${WWWDEVELOP}/InfoService.jar" />
	</target>
</project>